<html>
<head><title>KGI IRC meeting log</title></head>
<body bgcolor="white">
[17:01] &lt;<font color="green">Foske</font>&gt; <Foske> First I want to make compliments about the progress we made in the last months<br />
[17:02] &lt;<font color="blue">ortalo</font>&gt; <ortalo> ok. (someone volunteer to coordinate?)<br />
[17:02] &lt;<font color="green">Foske</font>&gt; <Foske> ok.. top of the list: the crt driver<br />
[17:02] &lt;<font color="green">Foske</font>&gt; <Foske> is it good enough to replace everything else<br />
[17:02] &lt;<font color="red">golbez</font>&gt; <golbez> I think so.<br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> I am fine with the CRT driver being the default, but a few caveats:<br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> 1) Should be integrated smoothly into build system<br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> 2) Failure to set valid timing when DDC1 fails on Radeon <br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> (valid timing negotaited, but doesn't take)<br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> 3) DDC2 would be really nice (otherwise people have to power cycle <br />
[17:03] &lt;<font color="brown">skids</font>&gt; <skids> monitors if they run a DDC2 app.)<br />
[17:03] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> How does it handle plasma, lcd, tft displays?<br />
[17:03] &lt;<font color="green">Foske</font>&gt; <Foske> IMHO it is, though we need an option to tell the driver not to do ddc<br />
[17:03] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: My tft eats the mode just fine<br />
[17:03] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> ok<br />
[17:04] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> someone here is plasma and/or lcd displays?<br />
[17:04] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> s/is/with/<br />
[17:04] &lt;<font color="green">Foske</font>&gt; <Foske> though there is a minor issue that I want in future...<br />
[17:04] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: 1) assumedly fixed once it becomes default 2) will need to work on that, any help appreciated (i.e., works here)<br />
[17:04] &lt;<font color="green">Foske</font>&gt; <Foske> I am working on DDC2. can't do anything more than say that :)<br />
[17:05] &lt;<font color="brown">skids</font>&gt; <skids> bughunter: crt will be better on a lcd than the other drivers, because at least it bothers to ask the lcd what it can do, the other drivers just fly off and send what they think is a "standard" mode but the LCD might have a different opinion on that matter.<br />
[17:05] &lt;<font color="purple">cow</font>&gt; <cow> a) what was that stuff with reversed order of found modes from monitor? b) who will (? needed?) fix the mode-negotiation loop regarding LOWER/RAISE?<br />
[17:05] &lt;<font color="green">Foske</font>&gt; <Foske> A tft has a "preferred mode", for me it is 1280x1024 @ 60 Hz. this is part of the DDC data. this means if the user requests a default mode, the monitor driver should propose it, not the chipset driver<br />
[17:06] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Ok. Since nobody seems to be radically against it, it's agreed on. I volunteer to do the work of getting rid of the rest (should be a good exercise in understanding the build system). Any concerns should be directed to me.<br />
[17:06] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I should really try something different from the SVGA driver for the monitor! ;-)<br />
[17:06] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> then the crt driver should have a name sounding more generic like "unimon" or something like that, to not confuse users.<br />
[17:06] &lt;<font color="blue">ortalo</font>&gt; <ortalo> bughunter: good idea<br />
[17:06] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> I am pretty sure, that user will come and ask "can I use it on my tft?"<br />
[17:07] &lt;<font color="gray">philbo_</font>&gt; <philbo_> but they all support crt timings! it's a driver for all display devices that support the crt way of setting display mode<br />
[17:07] &lt;<font color="purple">cow</font>&gt; <cow> bughunter, ortalo, i tend to agree with philbo that "crt" does match quite well<br />
[17:07] &lt;<font color="green">Foske</font>&gt; <Foske> okay. philbo_ will start the cleanup. what about my comment ?<br />
[17:07] &lt;<font color="red">golbez</font>&gt; <golbez> Does it really matter when the monitor driver is compiled into the display driver.  It is rather transparent to the user...<br />
[17:08] &lt;<font color="green">Foske</font>&gt; <Foske> no reactions ?<br />
[17:08] &lt;<font color="purple">cow</font>&gt; <cow> i do not see why we should rename a directory (in cvs!) as users are _NOT_ supposed to be bothered with it when it is the default monitor driver.<br />
[17:08] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: I'm for transferring the responsibility for setting the default resolution on TC_PROPOSE from the chipset driver to the monitor driver<br />
[17:09] &lt;<font color="green">Foske</font>&gt; <Foske> crt definitely is wrong, but ok. make it general for now ?<br />
[17:09] &lt;<font color="brown">skids</font>&gt; <skids> Keeping the dir is fine IMO, just the configure system should call it something other than crt.<br />
[17:09] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo_: Independent of the common technical base, user thinks, those are different (because they look different?)<br />
[17:09] &lt;<font color="green">Foske</font>&gt; <Foske> it is in the monitor dir already<br />
[17:09] &lt;<font color="brown">skids</font>&gt; <skids> As in, the front page menu where you select the driver.<br />
[17:09] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: what do you mean by the fixing of the mode negotiation loop<br />
[17:09] &lt;<font color="blue">ortalo</font>&gt; <ortalo> If there is not DDC, can the monitor propose a decent default mode?<br />
[17:10] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: only with parameters about the monitor applied<br />
[17:10] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: if you tell it it's limits via insmod.<br />
[17:10] &lt;<font color="gray">philbo_</font>&gt; <philbo_> ortalo: only if you manually specify limits because ther is no decent default that all monitors will support<br />
[17:10] &lt;<font color="green">Foske</font>&gt; <Foske> okay, details will follow in a document I'm going to write on the driver.<br />
[17:11] &lt;<font color="purple">cow</font>&gt; <cow> skids, the config-system will not provide a choice for selecting the "monitor"stuff anymore. just the boards which have to build (which should be "all" sooner than later anyways; e.g. either fix or hide the TNT2 thing from configure)<br />
[17:11] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: can you rearrange the proposal loop while you work on the cleanup ?<br />
[17:11] &lt;<font color="green">Foske</font>&gt; <Foske> I'll do the ddc2 stuff asap<br />
[17:12] &lt;<font color="green">Foske</font>&gt; <Foske> more comments that need everyones attention ?<br />
[17:12] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: should be trivial, I'll add to your document what change to the chipset drivers is neede (basically only matter of *not* setting the resolution when it is 0,0)<br />
[17:13] &lt;<font color="brown">skids</font>&gt; <skids> OK, then the last thing is, what do we do with all those hard-earned timing lists and frequency ranges?<br />
[17:13] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: ok<br />
[17:13] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> cow: When you are about fixing up the dialog - could you fix it up for 80 column textmodes, please?<br />
[17:13] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: there are no hard earned timing lists (the crt driver has the greatest list of all the drivers in cvs), for the range we need a .spec->arg script<br />
[17:14] <font color="slategray">fraggle</font> has joined #kgi<br />
[17:14] &lt;<font color="green">Foske</font>&gt; <Foske> skids: imho they were crazy from the beginning, for now we could store them somewhere, so we could use them in a user level config tool<br />
[17:14] &lt;<font color="purple">cow</font>&gt; <cow> philbo, the mode negotiation currently checks against the monitor if all other subsys already agreed. iirc i locally had to run through four loops to get a (somewhat) proper mode as my crap monitor is limited to a quite low resolution which the other subsys need to be lowered to match<br />
[17:14] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> fraggle: hi<br />
[17:14] &lt;<font color="brown">skids</font>&gt; <skids> philbo_: I don't know about you, but I spent a good deal of googling trying to get the HP timing list.<br />
[17:14] &lt;<font color="slategray">fraggle</font>&gt; <fraggle> hiya<br />
[17:14] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: it isn't that easy maybe. has to be checked out.<br />
[17:15] &lt;<font color="brown">skids</font>&gt; <skids> That database isn't exactly complete, but it does have some data well worth preserving.<br />
[17:15] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: ok. Let's make a script for those too then. (the crt driver has a parameter for specifying extra timings)<br />
[17:15] &lt;<font color="green">Foske</font>&gt; <Foske> okay. please keep the database for later use on the command line, but remove everything else not crt-related<br />
[17:15] &lt;<font color="brown">skids</font>&gt; <skids> Should the CRT driver have an option to build-in timings, top be used as a boot driver?<br />
[17:15] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> fraggle: Which OS/hw-arch do you run?<br />
[17:16] &lt;<font color="purple">cow</font>&gt; <cow> ohm and someone should document the module params thoroughly and in depth<br />
[17:16] &lt;<font color="green">Foske</font>&gt; <Foske> cow: I will<br />
[17:16] &lt;<font color="green">Foske</font>&gt; <Foske> next subject ?<br />
[17:16] &lt;<font color="blue">ortalo</font>&gt; <ortalo> yes (if no one objects)<br />
[17:16] &lt;<font color="green">Foske</font>&gt; <Foske> default keymap is broken<br />
[17:17] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: I suppose, yes. Let's leave that till we can actually use the drivers as boot drivers.<br />
[17:17] &lt;<font color="blue">ortalo</font>&gt; <ortalo> What is this problem? (First time I hear of it I think.)<br />
[17:17] &lt;<font color="green">Foske</font>&gt; <Foske> when you compile KGI from scratch, starting an app on ALT-F1 opens a graph that maps to ALTGR-F2<br />
[17:17] &lt;<font color="blue">ortalo</font>&gt; <ortalo> With graphic minor at 0?<br />
[17:17] &lt;<font color="green">Foske</font>&gt; <Foske> indeed<br />
[17:17] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Foske: is that keymap related?<br />
[17:18] &lt;<font color="green">Foske</font>&gt; <Foske> nsouch: someone here said that, I assumed it was an off by one calculation somewhere<br />
[17:18] &lt;<font color="blue">ortalo</font>&gt; <ortalo> That's a compiled-in keymap? (I usually need to use loadkeys myself before ALTGR works)<br />
[17:18] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: yes, the .de keymap actually<br />
[17:18] &lt;<font color="gray">philbo_</font>&gt; <philbo_> from my experiments, it is indeed keymap related. The default keymap has altgr mappings wrong<br />
[17:18] &lt;<font color="brown">skids</font>&gt; <skids> philbo: I'm fine with waiting on bootable-crt, too.<br />
[17:18] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> kgi still finds two keyboards - one AT and one PS/2<br />
[17:19] &lt;<font color="purple">cow</font>&gt; <cow> is minor 0 trusted even on non-devfs systems, btw? if so we should reflect this in cvs....<br />
[17:19] &lt;<font color="green">Foske</font>&gt; <Foske> cow: it is trusten completely now<br />
[17:19] &lt;<font color="brown">skids</font>&gt; <skids> Is there an opensource "keymap editor"?<br />
[17:19] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> though I have physically one AT keyboard connected to ps/2 via an at->ps/2 adapter.<br />
[17:19] &lt;<font color="gray">philbo_</font>&gt; <philbo_> (just did a quick check and pressing altgr-f4 wants to go to console 66, one off)<br />
[17:19] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> where one can find loadkeys by the way?<br />
[17:19] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: exactly, that is the issue<br />
[17:20] &lt;<font color="gray">philbo_</font>&gt; <philbo_> nsouch: console-tools. Look for it on sourceforge<br />
[17:20] &lt;<font color="green">Foske</font>&gt; <Foske> should be 67<br />
[17:20] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: 65 actually<br />
[17:20] &lt;<font color="green">Foske</font>&gt; <Foske> no, 64 + 4 - 1<br />
[17:20] <font color="darkcyan">oxygene</font> has joined #kgi<br />
[17:20] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> oxygene: hi<br />
[17:21] &lt;<font color="darkcyan">oxygene</font>&gt; <oxygene> hey bughunter <br />
[17:21] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: right. My bad.<br />
[17:21] &lt;<font color="green">Foske</font>&gt; <Foske> whe need someone to look at this<br />
[17:21] &lt;<font color="green">Foske</font>&gt; <Foske> we too<br />
[17:21] &lt;<font color="green">Foske</font>&gt; <Foske> I'm lost in the keyboard code...<br />
[17:21] &lt;<font color="brown">skids</font>&gt; <skids> philbo_: you and I just made the same thinko.  Scary.<br />
[17:21] &lt;<font color="gray">philbo_</font>&gt; <philbo_> I've done some keycode stuff lately, so I guess I can fix that.<br />
[17:22] &lt;<font color="green">Foske</font>&gt; <Foske> philbo_: oh, you can add that to your list ?<br />
[17:22] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: sure. It should be quite easy to fix anyways.<br />
[17:22] &lt;<font color="green">Foske</font>&gt; <Foske> next subject then: snapshotting / releasing kgi.<br />
[17:22] &lt;<font color="purple">cow</font>&gt; <cow> who will focus on satisfying loadkeys and fixing keymaps as soon as possible? that one really should be top priority, although it is unsexy to fix, granted<br />
[17:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> Regarding "debian packages, snapshots. too early?":<br />
[17:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> There are several possibilities:<br />
[17:22] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: you mean strings?<br />
[17:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> a) we go the BSD way: Develop deep changes in a branch and merge it to -current, where -current is the main cvs tree (advantage: main CVS tree is always stable)<br />
[17:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> b) we make a snapshot, break everything, stable everything, make another snapshot<br />
[17:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> c) we make a snapshot and open a devel and a stable branch as we do for GGI<br />
[17:22] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter hold back a little...<br />
[17:23] &lt;<font color="gray">philbo_</font>&gt; <philbo_> bughunter: that's awfuly involved. We just need something that woudl be easy for people to try. Right now just get a kgi enabled kernel is a pretty major pain.<br />
[17:23] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> c)<br />
[17:24] &lt;<font color="blue">ortalo</font>&gt; <ortalo> c)<br />
[17:24] &lt;<font color="green">Foske</font>&gt; <Foske> I vote for c for now, and we should have a list what to do before we release a real version<br />
[17:24] &lt;<font color="brown">skids</font>&gt; <skids> Debian users pretty much expect .debs to be drop-in and more or less production quality.  At the very least, any .deb package set <br />
[17:24] &lt;<font color="brown">skids</font>&gt; <skids> should create all the device files and deal with any init/config file conflicts like loadkeys.  (Or we could just FIX the loadkeys thing :-)<br />
[17:24] &lt;<font color="purple">cow</font>&gt; <cow> c)<br />
[17:24] &lt;<font color="purple">cow</font>&gt; <cow> but what about loadkeys? i won't do it.. so any takers?<br />
[17:24] &lt;<font color="green">Foske</font>&gt; <Foske> anyone feeling to take this one ? with sourceforge help it should be easy<br />
[17:24] &lt;<font color="brown">skids</font>&gt; <skids> c) for me as well.<br />
[17:25] &lt;<font color="brown">skids</font>&gt; <skids> Isn't it KGI, not loadkeys, that's broken?<br />
[17:25] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> kgi-wip standing for -current, kgi for -stable?<br />
[17:25] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: I can look into it, but can't promis anything. Is it really that necessary?<br />
[17:25] &lt;<font color="brown">skids</font>&gt; <skids> i.e. Linux VT emulation?<br />
[17:25] &lt;<font color="blue">ortalo</font>&gt; <ortalo> It would be nice to have something like a kgi-kernel Debian package too. But maybe it is a pretty difficult task (that's the kernel).<br />
[17:25] &lt;<font color="green">Foske</font>&gt; <Foske> nsouch: we have no control of kgi tree, but we can abuse the cvs of it as the stable tree, yes<br />
[17:25] &lt;<font color="purple">cow</font>&gt; <cow> c) with "stable" and "HEAD" that is. anything else is unacceptable. string-nitpick, though ;)<br />
[17:26] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: It is, because to do it right your patch has to be reversable.<br />
[17:26] &lt;<font color="blue">ortalo</font>&gt; <ortalo> skids: why?<br />
[17:26] &lt;<font color="purple">cow</font>&gt; <cow> philbo, we really have to fix it asap, yes<br />
[17:26] &lt;<font color="teal">njs</font>&gt; <njs> Shouldn't you be keeping both the stable and development trees in a single cvs repo, to make merges easier?<br />
[17:26] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: We can do so, once steffen is back (at least, when he gave us CVS write access)<br />
[17:27] &lt;<font color="brown">skids</font>&gt; <skids> It has to work with make-kpkg utility, which allows you to choose the patch-set.<br />
[17:27] &lt;<font color="green">Foske</font>&gt; <Foske> a few of us has write acces, don't they ?<br />
[17:27] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> njs: you're right<br />
[17:27] &lt;<font color="green">Foske</font>&gt; <Foske> well ok.. single cvs repo<br />
[17:27] &lt;<font color="brown">skids</font>&gt; <skids> I could try write access again but last time I did I think my auths were stale or something.<br />
[17:27] &lt;<font color="green">Foske</font>&gt; <Foske> kgi-0.9 tree and a kgi-current tree ?<br />
[17:27] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: ok. I'll put it higher on my list then.<br />
[17:27] &lt;<font color="blue">ortalo</font>&gt; <ortalo> single cvs repo is probably much wiser...<br />
[17:28] &lt;<font color="purple">cow</font>&gt; <cow> skids, i think it is KGI, yes. we need to \"satisfy loadkeys\" e.g. verify and write the fn_string stuff proper, somehow<br />
[17:28] &lt;<font color="purple">cow</font>&gt; <cow> philbo, great<br />
[17:28] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Foske: no same repo, same trees<br />
[17:29] &lt;<font color="green">Foske</font>&gt; <Foske> okay, volunteers for the cvs tree stuff ?<br />
[17:29] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> just tags to maintain branches<br />
[17:29] &lt;<font color="purple">cow</font>&gt; <cow> Foske, kgi-0.9 module, branch "stable" and our normal HEAD. i will tag the stable branch, soon, if nobody objects<br />
[17:30] &lt;<font color="green">Foske</font>&gt; <Foske> okay. cvs "split" assigned to cow<br />
[17:30] &lt;<font color="purple">cow</font>&gt; <cow> ack<br />
[17:30] &lt;<font color="brown">skids</font>&gt; <skids> Shouldn't it BE stable first? :-)<br />
[17:30] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> note that branch points are needed to track branches<br />
[17:30] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: didn't you hear? assigned to cow :-)<br />
[17:30] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> For the branch tag we should use a clean namespace to not come into naming conflicts later with multiple branches.<br />
[17:30] &lt;<font color="purple">cow</font>&gt; <cow> skids, indeed. that's the 'soon' part :)<br />
[17:30] &lt;<font color="green">Foske</font>&gt; <Foske> skids: we should rework some of the core stuff, I don;'t want to do that while we're so close to something stable<br />
[17:30] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Probably... Cow, please, do a full committers roundtable before actually create the tag...<br />
[17:31] &lt;<font color="purple">cow</font>&gt; <cow> philbo, heh!<br />
[17:31] &lt;<font color="purple">cow</font>&gt; <cow> ortalo, ok<br />
[17:31] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> I suggest to use the 'branch_<date>' or 'branch_<version>' scheme for branch tag names.<br />
[17:31] &lt;<font color="purple">cow</font>&gt; <cow> bughunter, no<br />
[17:31] &lt;<font color="green">Foske</font>&gt; <Foske> veto<br />
[17:31] &lt;<font color="green">Foske</font>&gt; <Foske> :-P<br />
[17:32] &lt;<font color="green">Foske</font>&gt; <Foske> details have to be worked out later (we got real issues later on, so I want to keep this short now)<br />
[17:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I' rather tag with "kgi_0_9" , "kgi_0_9_2", etc.<br />
[17:32] &lt;<font color="green">Foske</font>&gt; <Foske> cow will be on it.<br />
[17:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Untill "kgi_1_0" of course...<br />
[17:32] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> ortalo: yep<br />
[17:32] &lt;<font color="brown">skids</font>&gt; <skids> OK, so we make it stable, and then cow tags it stable... next subject?<br />
[17:32] &lt;<font color="green">Foske</font>&gt; <Foske> issues that need to be said about this now ?<br />
[17:33] <font color="green">neiljp</font> has joined #kgi<br />
[17:33] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> neiljp: hi<br />
[17:33] &lt;<font color="green">Foske</font>&gt; <Foske> libggi's kii target needs fixing<br />
[17:33] &lt;<font color="gray">philbo_</font>&gt; <philbo_> the kii issue is kind of selfish, because I need it to have a working xggi on kgi ;-)<br />
[17:33] &lt;<font color="brown">skids</font>&gt; <skids> When I added the auto-open of the KII target I found that it will<br />
[17:33] &lt;<font color="brown">skids</font>&gt; <skids> open /dev/event twice if GGI_INPUT is also set.  Got to figure out<br />
[17:33] &lt;<font color="brown">skids</font>&gt; <skids> how to keep it from doing that...<br />
[17:33] &lt;<font color="green">neiljp</font>&gt; <neiljp> bughunter: hi<br />
[17:33] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: is this something for you ?<br />
[17:33] &lt;<font color="green">neiljp</font>&gt; <neiljp> did I miss the entire meeting?<br />
[17:33] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: libggi's ? You mean libgii's kii target.<br />
[17:33] &lt;<font color="teal">njs</font>&gt; <njs> neiljp: ongoing<br />
[17:33] &lt;<font color="purple">cow</font>&gt; <cow> bughunter, it already is -0.9; that is enough. fix it up for good, combined with a rewrite of hairy parts and we could argue about an kgi-0.10 module, if you really want<br />
[17:33] &lt;<font color="green">neiljp</font>&gt; <neiljp> cool :)<br />
[17:33] &lt;<font color="green">Foske</font>&gt; <Foske> err of course<br />
[17:33] &lt;<font color="green">neiljp</font>&gt; <neiljp> njs: ta<br />
[17:33] &lt;<font color="green">Foske</font>&gt; <Foske> filip made a typo :)<br />
[17:33] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> neiljp: no, but you missed the first two topics... :)<br />
[17:33] &lt;<font color="brown">skids</font>&gt; <skids> neiljp: We're not even through with the "quick and easy" topics yet! :-)<br />
[17:34] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> s/two/three/<br />
[17:34] &lt;<font color="green">neiljp</font>&gt; <neiljp> skids: ah, damn, I knew I should have been here just for those topics ;)<br />
[17:34] &lt;<font color="green">Foske</font>&gt; <Foske> okay, what is the issue with it ?<br />
[17:34] &lt;<font color="gray">philbo_</font>&gt; <philbo_> the kii's target .label field on events is totally bogus<br />
[17:34] &lt;<font color="gray">philbo_</font>&gt; <philbo_> the inspiration for fix should probably come from linux_kbd<br />
[17:35] &lt;<font color="brown">skids</font>&gt; <skids> Is that why enter don't work in demo?<br />
[17:35] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: could be.<br />
[17:35] &lt;<font color="green">Foske</font>&gt; <Foske> cow: oh, don't forget to make some snapshots too :) <br />
[17:35] &lt;<font color="green">Foske</font>&gt; <Foske> anyone on the ggi site that wants to look at it ?<br />
[17:36] &lt;<font color="gray">philbo_</font>&gt; <philbo_> It's a mess but it's the last part of making libggi/libgii fully useable on kgi<br />
[17:36] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo_: Or linux_evdev...<br />
[17:36] &lt;<font color="green">Foske</font>&gt; <Foske> bughunters todo list is still empty ? :)<br />
[17:36] &lt;<font color="brown">skids</font>&gt; <skids> sorry, random thought there.<br />
[17:36] &lt;<font color="gray">philbo_</font>&gt; <philbo_> bughunter: say, you seem to know a lot about that :-)<br />
[17:36] &lt;<font color="green">Foske</font>&gt; <Foske> He wisely became silent<br />
[17:36] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: hehe - no. It is full.<br />
[17:37] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: too full to take this one extra ?<br />
[17:37] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> cow: and tags before huge changes<br />
[17:37] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: I am working on targets for macosx/darwin, I am working on libgpf...<br />
[17:37] &lt;<font color="gray">philbo_</font>&gt; <philbo_> well, lets move on. People know about the issue. If anyone has nothing to do at some point in the future, they can look a it.<br />
[17:37] &lt;<font color="green">Foske</font>&gt; <Foske> oki<br />
[17:37] &lt;<font color="brown">skids</font>&gt; <skids> philbo_: I'll take it.<br />
[17:37] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> example from freebsd tree:         RELENG_5_0_0_RELEASE: 1.26<br />
[17:37] &lt;<font color="indigo">nsouch</font>&gt; <nsouch>               RELENG_5_0: 1.26.0.2<br />
[17:37] <br />
[17:37] <br />
[17:37] &lt;<font color="green">Foske</font>&gt; <Foske> okay. asigned to skids<br />
[17:38] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: great<br />
[17:38] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo_: Today, I had a deeper look into linux_evdev for improving libgii's input driver for macosx/darwin. :)<br />
[17:38] &lt;<font color="green">Foske</font>&gt; <Foske> next subject: restorint previous devices after closing one<br />
[17:38] &lt;<font color="green">Foske</font>&gt; <Foske> restoring too<br />
[17:39] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: don't you have vgl under darwin?<br />
[17:39] &lt;<font color="green">Foske</font>&gt; <Foske> after closing a graphical device, it remains displayed<br />
[17:39] &lt;<font color="gray">philbo_</font>&gt; <philbo_> The proposed fix is to just go back to where the app was started from. But what if there is no such device (app started remotely) or it disappears in the meantime (higly unlikely)<br />
[17:39] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo_, skids: But I am there, when I get bitten by bugs by libgii's kii... :)<br />
[17:39] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: no.<br />
[17:39] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: There's no vgl under darwin.<br />
[17:40] &lt;<font color="brown">skids</font>&gt; <skids> I liked the model where each console "slot" had a graphics and a text device associated with it, and when a graphics app terminated it would go back to the corresponding text vc,<br />
[17:40] &lt;<font color="blue">ortalo</font>&gt; <ortalo> skids: I second this behavior.<br />
[17:40] &lt;<font color="brown">skids</font>&gt; <skids> you could switch between graphics/text with another key (maybe ALT-ESC) and the system remembered with mode (graphics or text) each slot was in.<br />
[17:40] &lt;<font color="brown">skids</font>&gt; <skids> s/with/which/<br />
[17:40] &lt;<font color="brown">skids</font>&gt; <skids> However, as philbo pointed out, we need to think about how this would<br />
[17:40] &lt;<font color="brown">skids</font>&gt; <skids> work in each of the various configurations multi-head can assume.<br />
[17:40] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: even if the graphics device opened doesn't correspond? I can open /dev/graphic4 from console 1. Would that thow me back to the login screen on console 4?<br />
[17:41] &lt;<font color="green">Foske</font>&gt; <Foske> easy: opened from console 1, so return to console 1 ?<br />
[17:41] &lt;<font color="green">Foske</font>&gt; <Foske> err<br />
[17:41] &lt;<font color="green">Foske</font>&gt; <Foske> hmzz<br />
[17:41] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: righ. But what about apps run remotely?<br />
[17:41] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: You mean, to display a (text) menu with ALT-ESC as like as Novell Netware does with CTRL+ESC?<br />
[17:41] &lt;<font color="green">Foske</font>&gt; <Foske> well, I assume the login was displayed before on the display...<br />
[17:42] &lt;<font color="brown">skids</font>&gt; <skids> I think the problem is that we haven't even considered the basics of multihead console switching, nevermind text vs graphics.<br />
[17:42] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> skids: you don't have an xterm for every X appli...<br />
[17:42] &lt;<font color="brown">skids</font>&gt; <skids> nsouch: true, but that's a UI decision.  I think the above gives a natural "multiple DOS 6.2 boxes" feel.<br />
[17:43] &lt;<font color="brown">skids</font>&gt; <skids> s/2/22/<br />
[17:43] &lt;<font color="green">Foske</font>&gt; <Foske> I think, go back to whatever was displayed before, will do it<br />
[17:43] &lt;<font color="gray">philbo_</font>&gt; <philbo_> How bout going back to where the app was started from and if there is no such device then just go back to the first device on the display (which would be the first console). Arbitrary choice seems better than no device being mapped whatsoever (especially since this cases is unlikely, who needs to run graphical applications remotely)<br />
[17:43] &lt;<font color="brown">skids</font>&gt; <skids> bughunter: no, alt-escape would go to text from graphics, or from text to graphics if there was a graphics app running in that slot.<br />
[17:44] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> what is text if no text mode support by the board?<br />
[17:44] &lt;<font color="brown">skids</font>&gt; <skids> philbo: Well, if you're going to do it that way, you probably should just go back to the last text VC explicitly requested.<br />
[17:44] &lt;<font color="green">Foske</font>&gt; <Foske> if whatever displayed before doesn;t exist, go to related console. if related console doesn;t exist, display last console mapped to that device. If no consoles mapped to the device display nothing or a KGI logo<br />
[17:44] &lt;<font color="purple">cow</font>&gt; <cow> is that what i mean by (asummed there is vt, that is)  how to trap openvt -s <num> -- logout <br />
[17:45] &lt;<font color="brown">skids</font>&gt; <skids> nsouch: if no text mode is supported by the board, then naturally the app must have not been started from a vc on the board so...<br />
[17:46] &lt;<font color="blue">ortalo</font>&gt; <ortalo> ... KGI logo.<br />
[17:46] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> ortalo: text or graphic? :p<br />
[17:46] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: you think so? For example currently when x crashes it throws you back to where it was started form no matter which vt you were on most recently. Seems pretty intuitive to me.<br />
[17:46] &lt;<font color="green">Foske</font>&gt; <Foske> if a board supports no consoles, it switches back to the previous graphic mode set, if no such mode (no graphic consoles left open on that display), power management seems a good option :)<br />
[17:47] &lt;<font color="purple">cow</font>&gt; <cow> we're hanging in the void for that case, currently as the kbd handler has no focus or the like<br />
[17:47] &lt;<font color="brown">skids</font>&gt; <skids> philbo: Actually I find that more annoying than intuitive, like when I kill X from the command line and it chucks me to another VT.<br />
[17:47] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: I'm not quite sure about what would that do. I suppose I should experiment with that<br />
[17:47] &lt;<font color="green">Foske</font>&gt; <Foske> skids: you forget X has no focus then !<br />
[17:48] &lt;<font color="brown">skids</font>&gt; <skids> Foske: ?<br />
[17:48] &lt;<font color="green">Foske</font>&gt; <Foske> you kill ANOTHER console, so nothing should happen if that maps to the same display<br />
[17:48] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: hrm good point.<br />
[17:48] &lt;<font color="green">Foske</font>&gt; <Foske> another (graphical) console<br />
[17:48] &lt;<font color="purple">cow</font>&gt; <cow> philbo, i experimented with that one a while ago and as long as we do not have a 'global' active kbd handler we probably should fallback to the last (whatever this might be) focus<br />
[17:49] &lt;<font color="blue">ortalo</font>&gt; <ortalo> It seems to me there are pro and cons to every behavior. But, globablly, the thing that emerges, is to go back to the last known mode on the head.<br />
[17:49] &lt;<font color="green">Foske</font>&gt; <Foske> if (has no focus(killed_display)) do nothing<br />
[17:49] &lt;<font color="green">Foske</font>&gt; <Foske> or something<br />
[17:49] &lt;<font color="green">Foske</font>&gt; <Foske> err if (not displayed())<br />
[17:49] &lt;<font color="brown">skids</font>&gt; <skids> Shouldn't the console system be a loadable module itself anyway?  Like so you can choose your flavor?<br />
[17:49] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> maybe the strategy should be configurable<br />
[17:50] &lt;<font color="purple">cow</font>&gt; <cow> philbo, i'd be interrested to help in handling that case, though. it's an interresting problem, or design problem if you like<br />
[17:50] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: well, I have no idea about the issues involved here (and I suspect neither has anyone else here besides you) so lets defer that till more of us gather some information about the problem<br />
[17:50] &lt;<font color="brown">skids</font>&gt; <skids> There's no reason not to have it N ways.<br />
[17:50] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> among static rules of course<br />
[17:50] &lt;<font color="purple">cow</font>&gt; <cow> philbo, k<br />
[17:50] &lt;<font color="green">Foske</font>&gt; <Foske> yeah ! have it N ways ! so noone can work on somebody elses computer !<br />
[17:50] &lt;<font color="green">Foske</font>&gt; <Foske> :)<br />
[17:51] &lt;<font color="green">Foske</font>&gt; <Foske> anyway, somebody wanting to volunteer to check this out ?<br />
[17:51] &lt;<font color="gray">philbo_</font>&gt; <philbo_> ortalo: last known mode requires an arbitrarily large stack of 'previous' as they can disappear<br />
[17:51] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> set -o vi and see what happens!<br />
[17:51] &lt;<font color="green">Foske</font>&gt; <Foske> I guess the problem is clear<br />
[17:51] &lt;<font color="purple">cow</font>&gt; <cow> so what about the logo thingy?<br />
[17:51] &lt;<font color="brown">skids</font>&gt; <skids> What's the easiest one to implement in the short term?<br />
[17:51] &lt;<font color="green">Foske</font>&gt; <Foske> cow: is nice, though DPMS power management is a nice one too.<br />
[17:52] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: I can take it as I have pretty good idea where it would go<br />
[17:52] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: you are not overloading your todo list ?<br />
[17:52] &lt;<font color="purple">cow</font>&gt; <cow> Foske, philbo? nah, he never would :P<br />
[17:52] &lt;<font color="green">Foske</font>&gt; <Foske> :)<br />
[17:52] &lt;<font color="green">Foske</font>&gt; <Foske> okay then<br />
[17:52] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: no no, most of the things I volunteered for are simple fixes once agreed on. (except for the crt stuff that is)<br />
[17:53] &lt;<font color="green">Foske</font>&gt; <Foske> oki<br />
[17:53] &lt;<font color="gray">philbo_</font>&gt; <philbo_> cow: you want a new logo?<br />
[17:53] &lt;<font color="green">Foske</font>&gt; <Foske> this one is easy too (except for the rare non-console cases)<br />
[17:53] &lt;<font color="purple">cow</font>&gt; <cow> skids, what exactly were you thinking of (logo-wise, iiuc)<br />
[17:53] &lt;<font color="green">Foske</font>&gt; <Foske> name noted.<br />
[17:53] &lt;<font color="purple">cow</font>&gt; <cow> philbo, skids seems to<br />
[17:53] &lt;<font color="green">Foske</font>&gt; <Foske> SMP issues and fast_ functions<br />
[17:53] &lt;<font color="green">Foske</font>&gt; <Foske> my favourite :)<br />
[17:53] &lt;<font color="brown">skids</font>&gt; <skids> cow: well, "The Right Thing To Do" is a bit preachy IMO, but mainly, s/GGI/KGI/<br />
[17:54] &lt;<font color="gray">philbo_</font>&gt; <philbo_> skids: we might want to put a smiley there<br />
[17:54] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: mine as well<br />
[17:54] &lt;<font color="green">Foske</font>&gt; <Foske> okay. as you all might have read on the mailinglist, I fixed SMP related issues by removing our own code, and replacing it by official kernel code<br />
[17:54] &lt;<font color="purple">cow</font>&gt; <cow> philbo, that'd be proper, yes<br />
[17:54] &lt;<font color="brown">skids</font>&gt; <skids> I have always been in favor of a big orange "It is now safe to turn *ON* your computer"<br />
[17:55] &lt;<font color="green">Foske</font>&gt; <Foske> not everything is set now, but basic SMP support should work.<br />
[17:55] &lt;<font color="brown">skids</font>&gt; <skids> But that should wait until we have high security/stability.<br />
[17:55] &lt;<font color="green">Foske</font>&gt; <Foske> It becomes very clear to me that we have always ignored the need of locking<br />
[17:55] &lt;<font color="gray">philbo_</font>&gt; <philbo_> I propose removing the fast_ functions. They are old hard to maintain and we don't really get much benefit from them<br />
[17:55] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> shouldn't we start with a giant lock?<br />
[17:56] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> then reduce the grain<br />
[17:56] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: I agree, though we shouldn;t ignore ortalos remarks regarding the accel<br />
[17:56] &lt;<font color="purple">cow</font>&gt; <cow> skids, so.. want to remove the kernel-config option for now until we settle on a new logo as it is likely that no new users will be interrested to debug eraly boot?<br />
[17:56] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: like (re)introducing the "Big Kernel Lock" ?<br />
[17:56] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: the source code for remap_page_range clearly shows that it is safe to use them no matter what the book says<br />
[17:56] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> philbo: yes and have arch abstraction in VM management<br />
[17:56] &lt;<font color="green">Foske</font>&gt; <Foske> nsouch: we should lock every bit of code that accesses registers<br />
[17:57] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: safe in the sense that they do the same thing as the fast_ version<br />
[17:57] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: ok, but it doesn't explain the memory leak<br />
[17:57] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> somehow<br />
[17:57] &lt;<font color="brown">skids</font>&gt; <skids> cow: Yeah the real reason for the logo was to slow down to read boot messages.  Since the boot driver no longer seems to need debugging, it could probably just be removed and later we'll do some sort of logo like the fbdev pengiun.<br />
[17:58] &lt;<font color="teal">njs</font>&gt; <njs> having a logo is useful if only so it's immediately obvious that your kernel patch has succeeded...<br />
[17:58] &lt;<font color="green">Foske</font>&gt; <Foske> I will start to work out locking abstraction<br />
[17:58] &lt;<font color="purple">cow</font>&gt; <cow> skids, k. i'll simply drop the menuconfig option for now<br />
[17:58] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> skids: thanks for the info, I love historical reasons<br />
[17:58] &lt;<font color="gray">philbo_</font>&gt; <philbo_> nsouch: I was meaning to have a talk with you about what exactly is needed now that I'm toying with splitting /dev/graphic but I suppose that should probably be done outside this meeting<br />
[17:58] &lt;<font color="green">Foske</font>&gt; <Foske> please keep things together guys<br />
[17:59] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I think we should really do more attempts to use the native remap_page_range() functions.<br />
[17:59] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: sorry ? we do it already now ?<br />
[17:59] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> hard, I think. graphic is *very* OS dependent, first because of the unix API (open, ioctl, mmap...)<br />
[17:59] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske, ortalo, philbo agree on removal, cow doesn't care either way.<br />
[17:59] &lt;<font color="blue">ortalo</font>&gt; <ortalo> But (changing the way we) playing with the VM is always touchy.<br />
[18:00] &lt;<font color="brown">skids</font>&gt; <skids> We should kill them for now, and concentrate any effort along these lines, if any is needed, on the BSD and Linux 2.5 VM.<br />
[18:00] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Arch independency and OS independency shall be addresses in parallel<br />
[18:00] &lt;<font color="purple">cow</font>&gt; <cow> .... fast_ .. fwiw, as said before ok with me to drop, although i do not see an advantage. otoh it probably would be well received to reuse existing (but sometimes suboptimal) infrastruc<br />
[18:00] &lt;<font color="green">Foske</font>&gt; <Foske> I'm willing to look on the locking, but if someone else could track the leaks ?<br />
[18:00] &lt;<font color="gray">philbo_</font>&gt; <philbo_> nsouch: right. Well /dev/graphic is just one of possible mappers. But anyways. I'll email you about all my ideas so that you can tell me what would help the FreeBSD port.<br />
[18:00] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I can try to locate these leaks. (As soon as I can reproduce the thing.)<br />
[18:00] &lt;<font color="green">Foske</font>&gt; <Foske> might be Gx00 related<br />
[18:01] &lt;<font color="green">Foske</font>&gt; <Foske> oki<br />
[18:01] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Foske: once my Tyan bi-AMD has CPU and memory ;)<br />
[18:01] &lt;<font color="purple">cow</font>&gt; <cow> Foske, can you quickly descibe an easy way to reproduce/observe 'em?<br />
[18:01] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> philbo: ok<br />
[18:01] &lt;<font color="green">Foske</font>&gt; <Foske> nsouch: thanks, will assign it to ortalo for now<br />
[18:02] &lt;<font color="gray">philbo_</font>&gt; <philbo_> So I take it we are agreed on removing fast_ functions.<br />
[18:02] &lt;<font color="blue">ortalo</font>&gt; <ortalo> At least we should try to remove them.<br />
[18:02] &lt;<font color="purple">cow</font>&gt; <cow> philbo, well, looks like<br />
[18:02] &lt;<font color="green">Foske</font>&gt; <Foske> cow: my setup : SMP kernel, Gx00 (G400 AGP) display=1, top on a console on display=0, accel demo running full speed on ALTGR-F5<br />
[18:02] &lt;<font color="green">Foske</font>&gt; <Foske> and see the memory counter growing<br />
[18:02] &lt;<font color="purple">cow</font>&gt; <cow> Foske, k<br />
[18:03] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: for kernel or for the accel demo?<br />
[18:03] &lt;<font color="green">Foske</font>&gt; <Foske> not tested wheter it is SMP or Gx00 specific<br />
[18:03] &lt;<font color="green">Foske</font>&gt; <Foske> for the kernel mem, accel stays fine<br />
[18:03] &lt;<font color="green">Foske</font>&gt; <Foske> accel demo<br />
[18:04] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Can you send me the offending program (unless it is one of the LibGGI programs)?<br />
[18:05] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: abused libggi/programs/demos/demo<br />
[18:05] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: I thought, you used the stars demo?<br />
[18:05] &lt;<font color="green">Foske</font>&gt; <Foske> removed the 3 seconds check on the random box drawing<br />
[18:05] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: wasn't sure that one was accellerated<br />
[18:05] &lt;<font color="green">Foske</font>&gt; <Foske> okay...<br />
[18:05] &lt;<font color="purple">cow</font>&gt; <cow> fine. next proposed point or point in agenda is ?<br />
[18:06] &lt;<font color="green">Foske</font>&gt; <Foske> CONFIG_INPUT<br />
[18:06] &lt;<font color="green">Foske</font>&gt; <Foske> philbo ?<br />
[18:06] &lt;<font color="green">Foske</font>&gt; <Foske> what about it ?<br />
[18:06] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: Just guessed, because you said again and again: "I saw the stars" :)<br />
[18:06] &lt;<font color="gray">philbo_</font>&gt; <philbo_> I have a fix that makes sure kgi doesn't use kii/keysyms.h (leaves them for userspace0<br />
[18:06] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Do people think this is a good way to go?<br />
[18:06] &lt;<font color="purple">cow</font>&gt; <cow> something we should put in HEAD right after the having tagged?<br />
[18:07] &lt;<font color="gray">philbo_</font>&gt; <philbo_> I suppose use of all the K_ stuff is very specific<br />
[18:07] &lt;<font color="brown">skids</font>&gt; <skids> Every time I look at KII I get depressed, so don't look to me for solutions.<br />
[18:07] &lt;<font color="gray">philbo_</font>&gt; <philbo_> nsouch: do you have any opinions about how linux specific kii is?<br />
[18:07] &lt;<font color="brown">skids</font>&gt; <skids> We need K_ syms as long as we have our own console implementation, and as a result, we have this huge set of #defines that varies from OS to OS.<br />
[18:08] &lt;<font color="purple">cow</font>&gt; <cow> skids, :) disgusting it really is indeed<br />
[18:08] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: ah! smoking while hacking... :)<br />
[18:08] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> philbo: it's not<br />
[18:09] &lt;<font color="green">Foske</font>&gt; <Foske> so, removing it is not an option ?<br />
[18:09] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> I've ported KII + written input drivers and a device for FreeBSD console<br />
[18:09] &lt;<font color="brown">skids</font>&gt; <skids> bughunter: militant?<br />
[18:09] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> starts working except that console switching is not yet managed by KII<br />
[18:10] &lt;<font color="green">Foske</font>&gt; <Foske> i.e this entire thing is a non-issue, besides that KII needs a cleanup :)<br />
[18:10] &lt;<font color="purple">cow</font>&gt; <cow> Foske, yes, i think it's not. we should rather look at something like a "console-stackker" mid- or rather long-term, imho<br />
[18:10] &lt;<font color="gray">philbo_</font>&gt; <philbo_> ok. let's move on then.<br />
[18:10] &lt;<font color="green">Foske</font>&gt; <Foske> great...<br />
[18:10] &lt;<font color="green">Foske</font>&gt; <Foske> one issue not on the agenda:<br />
[18:11] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> skids: why so? KII is not that bad.<br />
[18:11] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: s/militant/unyieldingly/ :)<br />
[18:11] &lt;<font color="green">Foske</font>&gt; <Foske> VT switching causes Accel deadlock. At least on SMP systems with the Gx00 accellerator, though I think it is a design flaw<br />
[18:11] &lt;<font color="brown">skids</font>&gt; <skids> bughunter: As long as you keep your militant tendencies to yourself I guess that's OK.<br />
[18:11] &lt;<font color="gray">philbo_</font>&gt; <philbo_> Foske: do you know the cause?<br />
[18:12] &lt;<font color="green">Foske</font>&gt; <Foske> seems not to be solved with locking, is a race: cpu 1 assumes something still to come while CPU 2 has passed it<br />
[18:13] &lt;<font color="green">Foske</font>&gt; <Foske> wait_idle in the graph_accel_nomap (iirc) waits forever<br />
[18:13] &lt;<font color="brown">skids</font>&gt; <skids> nsouch: I think we are trying to do too much with KII.  I'd prefer to see the OS mainstream decide on their console system, and if they pick a lame one, they suffer.<br />
[18:13] &lt;<font color="blue">ortalo</font>&gt; <ortalo> So the "wake_up()" does not go though.<br />
[18:13] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: maybe an issue for you ? you got SMP and are known with the accel code ?<br />
[18:13] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Are you sure that the buffer was indeed executed and that you got the SOFTRAP end-of-buffer IRQ?<br />
[18:14] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> but KGI must know about special keys (switching at least)<br />
[18:14] <font color="blue">scanlime</font> has joined #kgi<br />
[18:14] &lt;<font color="blue">ortalo</font>&gt; <ortalo> The problem is that I do not have SMP hardware, so maybe I will not reproduce the bug.<br />
[18:14] &lt;<font color="blue">ortalo</font>&gt; <ortalo> But if I can reproduce it, yes I can try to track it down.<br />
[18:14] &lt;<font color="green">Foske</font>&gt; <Foske> it is perfectly reproducable for me, just switch away and back<br />
[18:14] <font color="blue">scanlime</font> has quit (Client Quit)<br />
[18:14] &lt;<font color="green">Foske</font>&gt; <Foske> it might occur on single CPU too<br />
[18:15] &lt;<font color="green">Foske</font>&gt; <Foske> never checked it though<br />
[18:15] <font color="blue">scanlime</font> has joined #kgi<br />
[18:15] &lt;<font color="green">Foske</font>&gt; <Foske> ok. please let me know if you need help<br />
[18:15] &lt;<font color="green">Foske</font>&gt; <Foske> now...<br />
[18:15] &lt;<font color="green">Foske</font>&gt; <Foske> the big issues<br />
[18:15] &lt;<font color="green">Foske</font>&gt; <Foske> AGP support<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> nsouch: If we ship it as is.  We could also just ship a KGI that has an in-kernel API, and then as a separate project console systems could be hooked in to use as much of the KGI API as their design limits them to.<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> I think most people view AGP-GART, PCI-GART and other DMA stuff as<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> being "for accel".  There are more uses, and I consider accel FIFO<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> itself to be perhaps the least important:  My list:<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> 1) Textures<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> 2) Vector lists<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> 3) various LUTs<br />
[18:16] &lt;<font color="brown">skids</font>&gt; <skids> 4) Accel FIFO<br />
[18:17] &lt;<font color="blue">ortalo</font>&gt; <ortalo> skids: agreed<br />
[18:17] &lt;<font color="green">Foske</font>&gt; <Foske> Okay, what is new with AGP-GART ? or is it just yet another bus system ?<br />
[18:17] <font color="red">philbo</font> has quit (Ping timeout: 14400 seconds)<br />
[18:17] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> skids: right. But do OSes have better console than KII? NetBSD is supposed to AFAIK.<br />
[18:17] <font color="gray">philbo_</font> changes name to <font color="gray">philbo</font><br />
[18:17] &lt;<font color="brown">skids</font>&gt; <skids> Note that 1) and 3) never need to be mapped out (except for focus <br />
[18:17] &lt;<font color="brown">skids</font>&gt; <skids> changes) even when they are committed, and with proper driver coding we <br />
[18:17] &lt;<font color="brown">skids</font>&gt; <skids> can make it so that 2) never needs to be mapped out.<br />
[18:18] &lt;<font color="gray">philbo</font>&gt; <philbo> indeed. There are two separate issues here. How to use it in kernel and how to expose it to userspace. I suggest we start by discussing how to use it in kernel.<br />
[18:18] &lt;<font color="green">Foske</font>&gt; <Foske> are we there with bus abstraction ?<br />
[18:18] &lt;<font color="brown">skids</font>&gt; <skids> nsouch: whether theirs is better or not is not the point.  The point is that KGI has a boundary, and it's the mainstream developers (or sidestream devels) that are responsible for taking advatage of what KGI has to offer.<br />
[18:18] &lt;<font color="blue">ortalo</font>&gt; <ortalo> 0) Pictures (putbox)<br />
[18:18] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: and openbsd, too...<br />
[18:19] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: wrt kii, how about we strive to make kii just another one of the possible console layers?<br />
[18:19] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Foske: AGP also has another specific translation table...<br />
[18:19] &lt;<font color="brown">skids</font>&gt; <skids> philbo: works for me.<br />
[18:19] &lt;<font color="green">Foske</font>&gt; <Foske> guys, can we leave KII now  please ?<br />
[18:19] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> of course, they share lot of code.<br />
[18:19] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: I was considering putbox to be texture<br />
[18:19] &lt;<font color="gray">philbo</font>&gt; <philbo> Foske: done.<br />
[18:20] &lt;<font color="blue">ortalo</font>&gt; <ortalo> IMO, in-kernel, AGP raises the problem of "graphic-capable" buffers.<br />
[18:20] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> ... because there are two cases to take over:<br />
[18:20] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> a) the driver finds the card by searching through the bus<br />
[18:21] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> b) the bus driver finds the card and loads the driver<br />
[18:21] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> AFAIK, b) is the *BSD way.<br />
[18:21] &lt;<font color="gray">philbo</font>&gt; <philbo> bughunter: that's not very relevant to agp<br />
[18:21] &lt;<font color="green">Foske</font>&gt; <Foske> a) is no case, it is on top of b)<br />
[18:21] &lt;<font color="purple">cow</font>&gt; <cow> bughunter, non-issue. is (will be) abstracted in drv/display/system/whatever/system<br />
[18:22] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> cow: ok.<br />
[18:22] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> but that's relevent to arch/OS independency (which is everywhere :)<br />
[18:22] &lt;<font color="gray">philbo</font>&gt; <philbo> what we need to figure out is where/what sets up the gart, how is the driver notified about it and how is this memory managed (be it for accel buffers or to expose for userspace)<br />
[18:22] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> We can't support a new bus with addressing arch issues.<br />
[18:22] &lt;<font color="green">Foske</font>&gt; <Foske> -the detection system should be removed from the chipset driver, wich is a part of the bus abstraction issue, which might solve some AGP issues as well<br />
[18:22] &lt;<font color="brown">skids</font>&gt; <skids> I would say that AGP buffers should be mmapped above the VRAM on /dev/accel, even if they are textures.  When the mmap happens, OS facilities for allocating the space are invoked, and if successful, the mmap is successful... is that simple enough?<br />
[18:22] &lt;<font color="blue">ortalo</font>&gt; <ortalo> We need some management functions in-kernel so that a driver can check that some memory area referenced in the accel FIFO refers really to some "KGI graphic buffer" and extract the characteristic of the area (AGP capable or not, DMA, etc.)<br />
[18:22] &lt;<font color="purple">cow</font>&gt; <cow> real question is about the silly impl details involved with it or rather policy<br />
[18:23] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Foske: Ack.<br />
[18:23] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: I like NetBSD's bus and DMA abstraction layer.<br />
[18:23] &lt;<font color="green">Foske</font>&gt; <Foske> so maybe buggyhunter wasn't so wrong at all<br />
[18:24] &lt;<font color="green">Foske</font>&gt; <Foske> maybe we should implement bus abstraction first before we deal with AGP  issues<br />
[18:24] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Foske: AGP is not the only issue there!<br />
[18:24] &lt;<font color="purple">cow</font>&gt; <cow> skids, too fast for me but does sound simple enough for me at a first read<br />
[18:24] &lt;<font color="green">Foske</font>&gt; <Foske> and as buggyhunt likes it, I also declare him the volunteer to do that<br />
[18:24] &lt;<font color="purple">cow</font>&gt; <cow> hm<br />
[18:25] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Foske: currently, even via regular PCI accesses, we do not know in KGI how to use in-host textures...<br />
[18:25] &lt;<font color="brown">skids</font>&gt; <skids> Maybe we should just start with a kgi_agp_* set of functions which implement the least common denominator of the immediately available OS facilities.  Then, someday when we are sprucing things up, we can change that API to be a bus abstraction layer.<br />
[18:25] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: so true, this sounds more and more as a need of an abstraction layer<br />
[18:26] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> links to NetBSD's bus/dma abstraction layer are available at http://kgi-wip.sourceforge.net/documentation.html<br />
[18:26] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> Does everyone agree, when we use this API as is?<br />
[18:26] &lt;<font color="green">Foske</font>&gt; <Foske> skids: you the agp code, buggyhunt the bus abstraction ? :)<br />
[18:26] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: Anyway, prototyping AGP does not need full x86 independency<br />
[18:26] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: I expect a lot from a future NetBSD port for Arch issues...<br />
[18:26] &lt;<font color="purple">cow</font>&gt; <cow> philbo, a gart resource is nothing more than a resource. a drv does not (?) need to be aware of type, shuold it?<br />
[18:27] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: might be nice to use it, saves a lot of efford on bsd systems<br />
[18:27] &lt;<font color="brown">skids</font>&gt; <skids> If we do go for a bus abstraction during the first pass, then we should not try to make it work for anything but AGP.  Once it works for AGP, we let it be.  I don't want to see us side-tracked into become also the "KBI Project"<br />
[18:27] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: How much does NetBSD's API differ from FreeBSD's one?<br />
[18:28] &lt;<font color="gray">philbo</font>&gt; <philbo> cow: a driver's resrouce? Is it the card driver that sets up the gart?<br />
[18:28] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: not much USB, ISDN, sound systems are shared with compile conditions.<br />
[18:28] &lt;<font color="brown">skids</font>&gt; <skids> The card driver should only need to request GART regions from the kernel and poke a register or two.<br />
[18:28] &lt;<font color="purple">cow</font>&gt; <cow> skids, a bus abstraction naturally has to be bus agnostic, so i don't see your point in KBI at all? please explain<br />
[18:29] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: Once a guy comes up, who wanna port KGI to the sparc architecture.... On sparc, there's no AGP nor PCI.<br />
[18:29] &lt;<font color="brown">skids</font>&gt; <skids> Suppose we decide we want a "bus abstraction", and we go implement KGI for an OS that doesn't have one.  We should NOT spend time making the back end of buses we won;t ever use.<br />
[18:29] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: sparc has its own bus: SBUS. And UPA for the graphic board.<br />
[18:30] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: so the driver would during init setup the gart using kgi_apg_ functions, setup its own registers and then export the agp memory as another mmio region?<br />
[18:30] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Actually, I started with FreeBSD because I know it quite well, but NetBSD is the best target for lots of reasons<br />
[18:30] &lt;<font color="purple">cow</font>&gt; <cow> philbo, well right, not a driver resource but a resource used by the driver. still a bus abstracted resource used by the driver<br />
[18:30] &lt;<font color="brown">skids</font>&gt; <skids> philbo: More like during mmap than during init.<br />
[18:30] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: you can mmap only already available resources<br />
[18:30] &lt;<font color="brown">skids</font>&gt; <skids> philbo: and during vc switch.<br />
[18:31] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I think the driver does not need to be involved into the mmap and export to userspace.<br />
[18:31] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> NetBSD VM has numerous improvements over Mach, valuable for KGI.<br />
[18:31] &lt;<font color="blue">ortalo</font>&gt; <ortalo> KGI can do this directly per-se, without driver intervention.<br />
[18:31] &lt;<font color="brown">skids</font>&gt; <skids> philbo: what consititutes an "available" resource?  Doing anything other than on-demand allocation of AGP RAM won't fly.<br />
[18:31] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> ortalo: should the GART be handled has an other tlb?<br />
[18:31] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: OpenBSD implements NetBSD's UVM, btw.<br />
[18:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Afterwards, when the AGP (or regular PCI) memory areas get used. The driver will need some info about them.<br />
[18:32] &lt;<font color="purple">cow</font>&gt; <cow> philbo, /mmio region/resource/ yes, no?<br />
[18:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> nsouch: I don't know in fact.<br />
[18:32] &lt;<font color="gray">philbo</font>&gt; <philbo> cow: mmio resource yes<br />
[18:32] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: Does FreeBSD also implements NetBSD's UVM? Or is it still based on 4.4BSD/Mach VM?<br />
[18:32] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: can you use agp witout ever telling the driver about it?<br />
[18:33] &lt;<font color="brown">skids</font>&gt; <skids> bughunter: OK, so we change the prefix for kgi_agp_* to kgi_somethingelse_*  Still, I don't want to become the KBI Project.<br />
[18:33] &lt;<font color="blue">ortalo</font>&gt; <ortalo> philbo: no, but the driver only wants to know if ONE bit should be set or not set.<br />
[18:33] &lt;<font color="green">Foske</font>&gt; <Foske> maybe some discussion on the mailinglist should be involved in this before we can settle it. we're mow comparing this os to that os, and my conclusion is simply that the differences are big enough to show the need for some abstraction<br />
[18:33] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: no, unfortunately. FreeBSD chose the stability.<br />
[18:33] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: NetBSD, too. :)<br />
[18:34] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: doesn't it need to know about where and how much of agp memory there is?<br />
[18:34] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Foske: agreed.<br />
[18:34] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: I did not mean the opposite :)<br />
[18:34] &lt;<font color="green">Foske</font>&gt; <Foske> maybe bughunter can show us a little what the implications are<br />
[18:34] &lt;<font color="green">Foske</font>&gt; <Foske> by mail<br />
[18:35] &lt;<font color="green">Foske</font>&gt; <Foske> and I guess not everyone has read the docs well, for they were mostly just dumped on the website without comment<br />
[18:35] &lt;<font color="blue">ortalo</font>&gt; <ortalo> philbo: that's the other way round: the driver sees a request to tranfer some memory area. He wants to check if this is AGP or "correct" memory, to setup the hardware transfer.<br />
[18:35] &lt;<font color="purple">cow</font>&gt; <cow> philbo, i think it doesn't. if it is else it isn't<br />
[18:35] &lt;<font color="gray">philbo</font>&gt; <philbo> ok. Let's leave it for an email discussion as it isn't pressing and it would be beneficial to have long pauses to think about issues involved<br />
[18:36] &lt;<font color="brown">skids</font>&gt; <skids> OK, onto how AGP looks in userspace?<br />
[18:36] &lt;<font color="gray">philbo</font>&gt; <philbo> cow: the Radeons for example have AGP_BASE and AGP_TOP registers for specifying region in the internal Radeon address space that should generate agp requests<br />
[18:36] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: could you please pull this heavy wagon ? At least initiate the discussion with some practical talking instead of "we should do bus abstraction" ?<br />
[18:37] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: I can give it a try.<br />
[18:37] &lt;<font color="green">Foske</font>&gt; <Foske> thanks<br />
[18:37] &lt;<font color="green">Foske</font>&gt; <Foske> any comments one cannot keep for himself now ? :)<br />
[18:38] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I hate AGP.<br />
[18:38] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: First I must get the mach64/crt driver combination get to work in order to have a stable base to work on.<br />
[18:38] &lt;<font color="brown">skids</font>&gt; <skids> lol.<br />
[18:38] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> ortalo: :)<br />
[18:38] &lt;<font color="purple">cow</font>&gt; <cow> philbo, so it is using a resource which happens to call a callback in the worst (but common) case. i still do not grok it rightly, i guess<br />
[18:38] &lt;<font color="purple">cow</font>&gt; <cow> Foske, none. move on :P<br />
[18:38] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: Though, my PC has no AGP. So for AGP support, I need assistance.<br />
[18:39] &lt;<font color="green">Foske</font>&gt; <Foske> okay. someone else that starts the agp code in the mean time ?<br />
[18:39] &lt;<font color="gray">philbo</font>&gt; <philbo> cow: I suppose it's all just anoying implementation issues....<br />
[18:39] &lt;<font color="brown">skids</font>&gt; <skids> bunhunter: ATI cards have a GART for PCI built in.<br />
[18:39] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I really think we should focuss on ggiPutBox() before trying to do it via AGP.<br />
[18:39] &lt;<font color="green">Foske</font>&gt; <Foske> I assume buggyhunt can use assistance on the bus stuff<br />
[18:39] &lt;<font color="green">Foske</font>&gt; <Foske> oki<br />
[18:39] &lt;<font color="purple">cow</font>&gt; <cow> philbo, probably. real world always sucks :P<br />
[18:39] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: what do you mean?<br />
[18:39] &lt;<font color="green">Foske</font>&gt; <Foske> agp skipped till the bus abstraction basics are there<br />
[18:39] &lt;<font color="green">Foske</font>&gt; <Foske> next subject<br />
[18:40] &lt;<font color="green">Foske</font>&gt; <Foske> ggiPutBox ?<br />
[18:40] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I mean: sending data from host memory to the framebuffer using the accel engine.<br />
[18:40] &lt;<font color="brown">skids</font>&gt; <skids> Uhuh, not that easy, userspace buffers were deemed to be a different subject, so now I want to talk about those.<br />
[18:40] &lt;<font color="green">Foske</font>&gt; <Foske> ah, ok<br />
[18:40] &lt;<font color="green">Foske</font>&gt; <Foske> 10 minute pee break ?<br />
[18:41] &lt;<font color="green">Foske</font>&gt; <Foske> ok<br />
[18:41] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: Versus what, I thought that was what we were talkinga bout/<br />
[18:41] &lt;<font color="purple">cow</font>&gt; <cow> Foske, if you feel like, yes :)<br />
[18:41] &lt;<font color="brown">skids</font>&gt; <skids> peeeeeesa 10<br />
[18:41] &lt;<font color="green">Foske</font>&gt; <Foske> XX:55 we will continue<br />
[18:41] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> !sleep 5<br />
[18:41] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> :)<br />
[18:42] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> !time<br />
[18:42] &lt;<font color="blue">ortalo</font>&gt; <ortalo> OK for the break.<br />
[18:42] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> <f00f> It is 0:49 CET :)<br />
[18:42] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Yes. Me too.<br />
[18:42] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> :)<br />
[18:43] &lt;<font color="green">Foske</font>&gt; <Foske> my freenode server says 02:46 am<br />
[18:45] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> ...<br />
[18:45] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> still have lot of dip (debug in progress) :)<br />
[18:46] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: testuser_'s, anaki's, ekix's and golbez's todo lists are also empty... :)<br />
[18:46] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: same for njs, neiljp, mitchell_, fraggle, oxygene, popel and scanlime :)<br />
[18:46] &lt;<font color="green">Foske</font>&gt; <Foske> yeah, but for the three first we should be happy now if they are willing to test kgi :)<br />
[18:47] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: yes... :)<br />
[18:47] &lt;<font color="teal">njs</font>&gt; <njs> At this level of abstraciton I'm just a spectator :-)<br />
[18:47] &lt;<font color="green">Foske</font>&gt; <Foske> we never were so crowded here :)<br />
[18:48] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> 18 users here.<br />
[18:48] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> the record on #ggi was 14 or 15...<br />
[18:48] &lt;<font color="green">neiljp</font>&gt; <neiljp> bughunter: ho ho ho :)<br />
[18:48] &lt;<font color="green">Foske</font>&gt; <Foske> njs: that's ok :) what OS/Hardware do you use ?<br />
[18:48] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bus-abstraction is not a subject anymore, or bunghunter want's to continue the demonstration? :)<br />
[18:48] &lt;<font color="teal">njs</font>&gt; <njs> Foske: linux, dual x86, G400<br />
[18:48] &lt;<font color="green">Foske</font>&gt; <Foske> oh great ! <br />
[18:49] &lt;<font color="teal">njs</font>&gt; <njs> Foske: but I'm not sure I can actually do much testing; my kernel setup is a bit touchy right now.<br />
[18:49] &lt;<font color="green">Foske</font>&gt; <Foske> njs: that must be the best supported platform at the moment (besides the SMP issues we discussed earlier)<br />
[18:50] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> neiljp: you wanna have the docs for the rage128 cards?<br />
[18:50] &lt;<font color="green">Foske</font>&gt; <Foske> 2 minutes before meeting time<br />
[18:51] &lt;<font color="green">neiljp</font>&gt; <neiljp> bughunter: the docs are available? not that I'd understand a word of them, but...<br />
[18:51] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> neiljp: philbo, golbez and I have them.<br />
[18:51] &lt;<font color="green">Foske</font>&gt; <Foske> buggy: I can donate you a Rage 128 :-P<br />
[18:51] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> neiljp: I have the docs on a CD, which is at home... so I haven't it at hand right now.<br />
[18:51] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> a new item for philbo's TODO list then.<br />
[18:52] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: Is it PCI?<br />
[18:52] &lt;<font color="green">Foske</font>&gt; <Foske> yup<br />
[18:52] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: great.<br />
[18:52] &lt;<font color="brown">skids</font>&gt; <skids> Your pee is ready (to be flushed)<br />
[18:52] &lt;<font color="green">Foske</font>&gt; <Foske> hunty: mail me your address<br />
[18:52] &lt;<font color="green">Foske</font>&gt; <Foske> oki... ortalo ?<br />
[18:53] &lt;<font color="green">neiljp</font>&gt; <neiljp> philbo: cool :) apart from the lack of time ;)<br />
[18:53] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: ok<br />
[18:54] &lt;<font color="green">Foske</font>&gt; <Foske> next subject: vt_switching is based on kii_devices... i.e. if you open the wrong (or no) /dev/event, things go wrong<br />
[18:54] &lt;<font color="purple">cow</font>&gt; <cow> ------------------------------------------------------------<br />
[18:54] &lt;<font color="green">Foske</font>&gt; <Foske> =S<br />
[18:54] &lt;<font color="brown">skids</font>&gt; <skids> Uhuh, next subject is userspace accel buffers.<br />
[18:54] &lt;<font color="green">Foske</font>&gt; <Foske> oh ?<br />
[18:55] &lt;<font color="teal">njs</font>&gt; <njs> what are userspace accel buffers?<br />
[18:55] &lt;<font color="purple">cow</font>&gt; <cow> Foske, indeed<br />
[18:55] &lt;<font color="brown">skids</font>&gt; <skids> The second half of the AGP discussion.<br />
[18:55] &lt;<font color="green">Foske</font>&gt; <Foske> sorry, missed that one<br />
[18:55] &lt;<font color="purple">cow</font>&gt; <cow> Foske we urgently have to settle those <br />
[18:56] &lt;<font color="green">Foske</font>&gt; <Foske> njs: the possability for an outside-kernel piece of code to accellerate graphics full speed by having access to the accellerator unit<br />
[18:56] &lt;<font color="purple">cow</font>&gt; <cow>  thought / quick intros?<br />
[18:56] &lt;<font color="brown">skids</font>&gt; <skids> cow: of people, or topic?<br />
[18:56] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: could we move that to the mailing list as well? I think the same applies (not as pressing and people need to make themselves a good idea of what the issues are)<br />
[18:56] &lt;<font color="green">Foske</font>&gt; <Foske> ok:) skipped !<br />
[18:56] &lt;<font color="purple">cow</font>&gt; <cow> skids, people always are void. only topic is real <br />
[18:56] &lt;<font color="brown">skids</font>&gt; <skids> Hrm, well I can reduce the discussion to this point and continue on the mailing list:<br />
[18:57] &lt;<font color="brown">skids</font>&gt; <skids> I'd really like to see an mmap control page set for controlling <br />
[18:57] &lt;<font color="brown">skids</font>&gt; <skids> the accel so the other CPU can grab a finished buffer on SMP systems<br />
[18:57] &lt;<font color="brown">skids</font>&gt; <skids> w/o the context switch.  Also this pertains to certain types of vsync stuff,<br />
[18:57] &lt;<font color="brown">skids</font>&gt; <skids> but I'll wait till that topic for that part.<br />
[18:57] &lt;<font color="green">Foske</font>&gt; <Foske> skids will introduce this to the mailing list<br />
[18:57] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: AFAIK, you said, FreeBSD has addressed the VM issues to allow access to hw resources from userspace. Is that right? If yes, can you elaborate on them, please?<br />
[18:58] &lt;<font color="green">Foske</font>&gt; <Foske> now, next subject ?<br />
[18:58] &lt;<font color="purple">cow</font>&gt; <cow> foske, useles. just paste a strip to the list with names omitted if you feel the list to be involved<br />
[18:58] &lt;<font color="green">Foske</font>&gt; <Foske> ?<br />
[18:59] &lt;<font color="brown">skids</font>&gt; <skids> Re: vt switching then... what gets restored?<br />
[18:59] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: wait, that's the next one<br />
[18:59] &lt;<font color="brown">skids</font>&gt; <skids> Oh, sorry.<br />
[19:00] &lt;<font color="brown">skids</font>&gt; <skids> RIght, /dev/event.<br />
[19:00] &lt;<font color="purple">cow</font>&gt; <cow> so how does that one look like at a glance. write only ping read only pong i guess? sane counter-example?<br />
[19:00] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: yes... trying to find a starting point.<br />
[19:00] &lt;<font color="green">Foske</font>&gt; <Foske> err<br />
[19:00] &lt;<font color="green">Foske</font>&gt; <Foske> ELOST<br />
[19:01] <font color="blue">ortalo</font> has quit (Read error: 110 (Connection timed out))<br />
[19:01] &lt;<font color="brown">skids</font>&gt; <skids> I won't be annoying and point out that this problem is just another result of KII.  Oops. I guess I just did.<br />
[19:01] &lt;<font color="gray">philbo</font>&gt; <philbo> Basically, I can't think of a good solution to the /dev/event+vt swithing problem. Suggestions are welcome.<br />
[19:01] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bunghunter: in terms of differences with Linux graphic mapper implementation?<br />
[19:01] &lt;<font color="green">Foske</font>&gt; <Foske> okay, skids volunteers to rewrite KII :) NEXT :-P<br />
[19:01] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: yes.<br />
[19:02] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> foSke: shouldn't we wait until ortalo is back? :)<br />
[19:02] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> Foske: skids is willing to rip KII, not rewrite it.<br />
[19:02] &lt;<font color="green">Foske</font>&gt; <Foske> oh<br />
[19:02] &lt;<font color="gray">philbo</font>&gt; <philbo> ok, well I suppose people aren't very familiar with the issue. Moving to mailing list with ample background information.<br />
[19:02] &lt;<font color="brown">skids</font>&gt; <skids> ortalo must have prostate problems, to pee so long :-)<br />
[19:02] &lt;<font color="green">Foske</font>&gt; <Foske> almost the same <br />
[19:02] &lt;<font color="green">Foske</font>&gt; <Foske> good idea<br />
[19:02] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: maybe his baby makes some noices now... :)<br />
[19:03] &lt;<font color="green">Foske</font>&gt; <Foske> think the next subject is actually discussable... :)<br />
[19:03] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> s/baby/babies<br />
[19:03] &lt;<font color="gray">philbo</font>&gt; <philbo> next topic: can libggi solve all of our vt swithchin/restoring issues?<br />
[19:03] &lt;<font color="purple">cow</font>&gt; <cow> a shared one sounds dangerous to me, personally. urgently needed but odd to my untrained mind<br />
[19:03] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo: IMO, this is a target issue of libggi.<br />
[19:04] &lt;<font color="brown">skids</font>&gt; <skids> Umm, I think there are some things that KGI should restore beyond mode...<br />
[19:04] &lt;<font color="gray">philbo</font>&gt; <philbo> bughunter: does libggi have a way of telling the app that something happened and it should probably redraw?<br />
[19:04] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: most of the differences stand in the fact that there's no per process data in the vnode system and<br />
[19:04] &lt;<font color="brown">skids</font>&gt; <skids> philbo: GII has expose events.<br />
[19:04] &lt;<font color="brown">skids</font>&gt; <skids> philbo: and UNIX has sigwinch.<br />
[19:04] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: ok. Is that enough?<br />
[19:05] &lt;<font color="green">Foske</font>&gt; <Foske> if kgi sends sigwinch, we're there :)<br />
[19:05] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo: Have you read the last mails from the GGI ML (the ones from the heating discussion)<br />
[19:05] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: for a given vnode, the VM management is centralized by pagers.<br />
[19:05] &lt;<font color="purple">cow</font>&gt; <cow> nsouch, and?<br />
[19:05] &lt;<font color="green">Foske</font>&gt; <Foske> the "I hate amiga kiddies by default" one :)<br />
[19:05] <font color="blue">ortalo</font> has joined #kgi<br />
[19:05] &lt;<font color="green">Foske</font>&gt; <Foske> wb ortalo<br />
[19:06] &lt;<font color="brown">skids</font>&gt; <skids> Can we get agreement that any data in VRAM is definitely NOT preserved by KGI? <br />
[19:06] &lt;<font color="green">Foske</font>&gt; <Foske> ortalo: vt switching based on event: moved to mailng list. topic: what to restore on vt switch<br />
[19:06] &lt;<font color="gray">philbo</font>&gt; <philbo> bughunter: well, that one wasn't all that constructive. I think people here have a better understanding of kgi and the complexity of implementation details<br />
[19:06] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: thus difficult to distinguinsh two different mappings of different processes when time comes to handle faults.<br />
[19:06] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: Sounds reasonable to me<br />
[19:06] &lt;<font color="green">Foske</font>&gt; <Foske> skids: I agree there, if an app is slow it should draw in RAM instead of vram<br />
[19:07] &lt;<font color="green">Foske</font>&gt; <Foske> then it can continue to draw when moved to the background<br />
[19:07] &lt;<font color="blue">ortalo</font>&gt; <ortalo> skids: sounds ok to me too. except maybe some very special cases (like cursor shape if stored in VRAM).<br />
[19:07] &lt;<font color="purple">cow</font>&gt; <cow> skids, in my simple-minded mind it is not, right.<br />
[19:08] &lt;<font color="brown">skids</font>&gt; <skids> ortalo: I think the text vc system should maybe have a cursor shape stored, but I'm not too sure about graphics apps.<br />
[19:08] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: sounds hard. I don't think it's unreasonable to ask the app to restore it. Console does it.<br />
[19:08] &lt;<font color="green">Foske</font>&gt; <Foske> mwaah.. graphic apps just should restore everything<br />
[19:08] &lt;<font color="brown">skids</font>&gt; <skids> It makes it a lot simpler for our first few releases if we know we never have to protect anything in VRAM from another process.<br />
[19:08] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: I think, you told that on the KGI ML... Am I right?<br />
[19:09] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: I did.<br />
[19:09] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: ok<br />
[19:10] &lt;<font color="green">Foske</font>&gt; <Foske> ok. so kgi should send a signal when a app should redraw (App gets sigcont already, by the way)<br />
[19:10] &lt;<font color="gray">philbo</font>&gt; <philbo> so: everything is assumed lost on a vt switch. libggi provides a good interface for apps to react to such event. Anything to add?<br />
[19:10] &lt;<font color="green">Foske</font>&gt; <Foske> I will take care of the signalling<br />
[19:10] &lt;<font color="brown">skids</font>&gt; <skids> Well, I'm not so sure about graphics context.<br />
[19:11] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: you mean the accelerator context? That one is per mapping and is preserved.<br />
[19:11] &lt;<font color="brown">skids</font>&gt; <skids> Including things like texture LUTs?<br />
[19:11] &lt;<font color="purple">cow</font>&gt; <cow> that one is tricky and furthermore dangerous, yeah.<br />
[19:12] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: but I guess you're getting to the question of what happens if your accel buffers are in agp space...<br />
[19:12] &lt;<font color="brown">skids</font>&gt; <skids> philbo: No I was saving that one to whollop people over the head later :-)<br />
[19:12] &lt;<font color="green">Foske</font>&gt; <Foske> philbo: that requires decent handling of the signals...<br />
[19:12] &lt;<font color="green">Foske</font>&gt; <Foske> won't be easy, but must be done<br />
[19:12] &lt;<font color="brown">skids</font>&gt; <skids> The problem is, GPU contexts are getting bigger and bigger.<br />
[19:13] &lt;<font color="green">Foske</font>&gt; <Foske> so less and less reasons to keep things in back buffers ;)<br />
[19:13] &lt;<font color="brown">skids</font>&gt; <skids> (as in, non-VRAM register values).<br />
[19:14] &lt;<font color="brown">skids</font>&gt; <skids> OK, so we are then agreed that the app needs to restore GPU context?<br />
[19:14] &lt;<font color="green">Foske</font>&gt; <Foske> don't forget: switching away an applicatin that utilizes 128 MB video mem is not a MUST for the user, it is a CAN DO<br />
[19:14] &lt;<font color="green">Foske</font>&gt; <Foske> from KGI<br />
[19:14] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: GPU context switching is not a problem on highend cards.<br />
[19:14] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: right, though I don't think I have a good idea about the exact scale of the problem<br />
[19:15] &lt;<font color="brown">skids</font>&gt; <skids> Well, yes, I am kinda hiding the "but then"... here goes "but then the accel pipe cannot resume execution until the app's GPU reload is done."<br />
[19:15] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: yes, I think gpu context is preserved. KGI was built around that assumption and it is just too hard otherwise. We'll deal with practical problems when we encounter them.<br />
[19:15] &lt;<font color="brown">skids</font>&gt; <skids> And since the app may be reloading the GPU using the accel pipe....<br />
[19:15] &lt;<font color="green">Foske</font>&gt; <Foske> skids: hey, how many times a sec do you swap away heavy graphic apps ?<br />
[19:16] &lt;<font color="green">Foske</font>&gt; <Foske> anyway<br />
[19:16] &lt;<font color="brown">skids</font>&gt; <skids> Foske: It's not the performance, it's the amount of kernel-side code to maintain/debug.<br />
[19:16] &lt;<font color="green">Foske</font>&gt; <Foske> I'll take care of the signals, and it's up to the ggi guys to deal with it. (volunteers ?)<br />
[19:17] &lt;<font color="green">Foske</font>&gt; <Foske> I'll take care of sending the signals that is<br />
[19:17] &lt;<font color="brown">skids</font>&gt; <skids> Foske: luckily, the trend is *away* from write-only registers, aliased registers and such, but the register load/reload can end up being a pretty big (and thus bug-infested) section of code.<br />
[19:18] &lt;<font color="green">Foske</font>&gt; <Foske> skids: I never said supporting swapping away accellerators was going to be easy :)<br />
[19:18] &lt;<font color="green">Foske</font>&gt; <Foske> next subject....<br />
[19:18] &lt;<font color="brown">skids</font>&gt; <skids> Foske: I'd prefer we do, I just want to make sure everyone knows the implications before agreeing to it.<br />
[19:19] &lt;<font color="green">Foske</font>&gt; <Foske> synchronisation of accelleration: is polling /dev/kgi/device0/accel the best ?<br />
[19:19] &lt;<font color="brown">skids</font>&gt; <skids> Foske: I'll take care of GII issuing an expose event.<br />
[19:20] &lt;<font color="green">Foske</font>&gt; <Foske> skids: good, though you should also catch the sigttou and sigttin<br />
[19:20] &lt;<font color="gray">philbo</font>&gt; <philbo> we *need* synchronization. As far as I understand things, that's the best solution so far. Any suggestions?<br />
[19:20] &lt;<font color="green">Foske</font>&gt; <Foske> everyone still here ???<br />
[19:20] &lt;<font color="blue">ortalo</font>&gt; <ortalo> yes<br />
[19:20] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> yes<br />
[19:21] &lt;<font color="blue">ortalo</font>&gt; <ortalo> though sleeping a little... :-)<br />
[19:21] &lt;<font color="brown">skids</font>&gt; <skids> philbo: Mostly we *need* to be able to queue certain commands for execution during vsync.<br />
[19:21] &lt;<font color="green">Foske</font>&gt; <Foske> huh :)<br />
[19:21] &lt;<font color="brown">skids</font>&gt; <skids> The rest is gravy.<br />
[19:21] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: ugh. That a whole other can of worms<br />
[19:21] &lt;<font color="green">Foske</font>&gt; <Foske> mjammy, worms...<br />
[19:22] &lt;<font color="brown">skids</font>&gt; <skids> I volunteer to add the API to LibGGIMISC for issuing flip-on-retrace and such.<br />
[19:22] &lt;<font color="green">Foske</font>&gt; <Foske> ok<br />
[19:22] &lt;<font color="green">Foske</font>&gt; <Foske> noted:)<br />
[19:22] &lt;<font color="green">Foske</font>&gt; <Foske> back to the isse<br />
[19:22] &lt;<font color="green">Foske</font>&gt; <Foske> issue<br />
[19:22] &lt;<font color="gray">philbo</font>&gt; <philbo> well, before people start falling asleep on the old continent, lets move to splitting /dev/graphic<br />
[19:23] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Apparently, FreeBSD needs this (IIUC).<br />
[19:23] &lt;<font color="green">Foske</font>&gt; <Foske> :)<br />
[19:23] &lt;<font color="green">Foske</font>&gt; <Foske> oki<br />
[19:23] &lt;<font color="gray">philbo</font>&gt; <philbo> Are people opposed to the idea? Anybody feels it is useless waste of major numbers?<br />
[19:24] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Maybe it is not so urgent under Linux?<br />
[19:24] &lt;<font color="brown">skids</font>&gt; <skids> I'm getting the impression that we are too tied to the fd's somehow, and we need (don't say it, no!!!) and abstraction layer.<br />
[19:24] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> philbo: I guess, Linus thinks so.<br />
[19:24] &lt;<font color="green">Foske</font>&gt; <Foske> wasting majors will be a reason to decline KGI once mores<br />
[19:24] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> ortalo: yes, this was the conclusion on the ML<br />
[19:24] &lt;<font color="blue">ortalo</font>&gt; <ortalo> It's not the major numbers that worry me, it is more the additional code for new device types in Linux.<br />
[19:24] &lt;<font color="green">Foske</font>&gt; <Foske> this works for Linux, that works for BSD....<br />
[19:24] &lt;<font color="teal">njs</font>&gt; <njs> does devfs make matters better or worse?<br />
[19:25] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> skids: good point. :)<br />
[19:25] &lt;<font color="green">Foske</font>&gt; <Foske> njs: neighter<br />
[19:25] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: it is hard to wait for an accel to go idle if you don't have a fd for each accel to wait on<br />
[19:25] &lt;<font color="green">Foske</font>&gt; <Foske> njs: it prevents you from wasting minors, though not majors<br />
[19:25] &lt;<font color="brown">skids</font>&gt; <skids> I think we should use devfs when available but not require it.<br />
[19:25] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> I progressed on the FreeBSD side and a new mapper command is used for accessing a particular device from a /dev/graphic<br />
[19:25] &lt;<font color="green">Foske</font>&gt; <Foske> 16 bit majors will solve the issue for us<br />
[19:26] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> An attach command that differenciate the graphic minor from the device number.<br />
[19:26] &lt;<font color="green">Foske</font>&gt; <Foske> iirc that is linux 2.5 code<br />
[19:26] &lt;<font color="brown">skids</font>&gt; <skids> We should be concentrating on 2.5 and on as far as Linux is concerned IMO.<br />
[19:26] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> KGIC_MAPPER_ATTACH, with a device_id as parameter<br />
[19:27] &lt;<font color="green">Foske</font>&gt; <Foske> skids: for the wip branch yes, for the stable branch no<br />
[19:27] &lt;<font color="purple">cow</font>&gt; <cow> i'm not sure we need (additional) majors. since we (seem to be freed) from pressure by minors we could push one level and do away with only one (or two for conveniance) majors and a shifted minor for non-accel, acce.<br />
[19:27] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> This trick avoids the /dev/graphic breakage for now.<br />
[19:27] &lt;<font color="brown">skids</font>&gt; <skids> Foske: sure, but for the stable branch any kludge that works is fair game IMO.<br />
[19:27] &lt;<font color="green">Foske</font>&gt; <Foske> cow: I think this issue doesn't count for linux right now. it works there, so please keep the stable tree this way<br />
[19:28] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> nsouch: For completeness, is there a KGIC_MAPPER_DETACH, too ?<br />
[19:28] &lt;<font color="gray">philbo</font>&gt; <philbo> so there are at least two solutions for the major number contention. Hence splitting /dev/graphic is a good idea?<br />
[19:28] &lt;<font color="purple">cow</font>&gt; <cow> Foske, the stable is out of discussion fro my POV<br />
[19:28] &lt;<font color="purple">cow</font>&gt; <cow> mmmmmmmmm<br />
[19:28] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> bughunter: no, the close is responsible for the detach.<br />
[19:28] &lt;<font color="green">Foske</font>&gt; <Foske> into how many mayors ?<br />
[19:29] &lt;<font color="gray">philbo</font>&gt; <philbo> graphic, accel, fb<br />
[19:29] &lt;<font color="purple">cow</font>&gt; <cow> /me's keyboard has a wackelkontakt :-/<br />
[19:29] &lt;<font color="brown">skids</font>&gt; <skids> philbo: I'd just cuation to try to keep the code that figures out what "thing" is being accessed from becoming completely entangled to the extent possible -- it may become an issue later.<br />
[19:30] &lt;<font color="gray">philbo</font>&gt; <philbo> skids: very true. I'm trying to mirror the kgi interface there (only a single attach/detach pair, should be very clean)<br />
[19:30] &lt;<font color="purple">cow</font>&gt; <cow> skids, may but should not. yea<br />
[19:31] &lt;<font color="purple">cow</font>&gt; <cow> .....next?<br />
[19:31] &lt;<font color="gray">philbo</font>&gt; <philbo> I got nothing. Anyone?<br />
[19:31] &lt;<font color="brown">skids</font>&gt; <skids> My brain is fried.<br />
[19:31] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> VGA driver?<br />
[19:31] &lt;<font color="green">Foske</font>&gt; <Foske> mine too<br />
[19:31] &lt;<font color="green">Foske</font>&gt; <Foske> ?<br />
[19:31] &lt;<font color="green">Foske</font>&gt; <Foske> what about it ?<br />
[19:32] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> It's still broken, no?<br />
[19:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Maybe we should refrain from splitting /dev/graphic too early then, no?<br />
[19:32] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> yes.<br />
[19:32] &lt;<font color="blue">ortalo</font>&gt; <ortalo> Who works on the VGA driver?<br />
[19:32] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: I'm working on a sample implementation. If people disagree, I'm perfectly willing to throw it away.<br />
[19:32] &lt;<font color="maroon">bughunter</font>&gt; <bughunter> anyone feeling able to make a (pre-) summary of what we have discussed?<br />
[19:32] &lt;<font color="purple">cow</font>&gt; <cow> nsouch vga-text is in cvs. please try it out and get back to me or the list iff problems arise (apart from absent features which you ought to implenment()<br />
[19:33] &lt;<font color="green">Foske</font>&gt; <Foske> bughunter: i'm about to sleep now, gf is waiting<br />
[19:33] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> cow: ok<br />
[19:33] &lt;<font color="gray">philbo</font>&gt; <philbo> Foske: are you going to write up a summary? (later)<br />
[19:33] &lt;<font color="green">Foske</font>&gt; <Foske> tomorrow<br />
[19:33] &lt;<font color="blue">ortalo</font>&gt; <ortalo> philbo: I guess it will be useful. Maybe it's something that will re-appear soon. But it changes the way we were used to look at KGI devices...<br />
[19:34] &lt;<font color="green">Foske</font>&gt; <Foske> it might appear in FreeBSD soon, and in Linux later<br />
[19:34] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> If no other solution found in the middle.<br />
[19:34] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: yeah, I know. I think it is worthwhile to have something working so that people can see what it does to the code and make a better judgement of whether it is a good idea or not<br />
[19:35] &lt;<font color="gray">philbo</font>&gt; <philbo> ortalo: I'm not fully convinced myself, hence my willingness to throw it away when I'm done and it doesn't satisfy my desires<br />
[19:35] &lt;<font color="purple">cow</font>&gt; <cow> nsouch, i did not forget about the FreeBSD integration, but that one may take some time. i don't have it locally, so playing with it is cumbersome, thus time-intensive. i'm sure you see my point.<br />
[19:35] &lt;<font color="green">Foske</font>&gt; <Foske> okay..<br />
[19:36] &lt;<font color="green">Foske</font>&gt; <Foske> I'm off to sleep now, log will continue to run, don't talk too much, only got 223 MB left :)<br />
[19:36] &lt;<font color="gray">philbo</font>&gt; <philbo> good night Foske<br />
[19:36] &lt;<font color="indigo">nsouch</font>&gt; <nsouch> cow: I do.<br />
[19:36] &lt;<font color="green">Foske</font>&gt; <Foske> summary will follow soon<br />
[19:37] &lt;<font color="blue">ortalo</font>&gt; <ortalo> I guess I need some sleep too now.<br />
[19:37] &lt;<font color="purple">cow</font>&gt; <cow> i do too<br />
[19:37] &lt;<font color="blue">ortalo</font>&gt; <ortalo> If you don't mind, I'd rather say you good bye now... :-)<br />
<h3>Participants</h3>
<table>
<tr><th>Nick</th><th>First occurence at</th><th>Number of messages</th></tr>
<tr bgcolor="green"><td><font color="white">Foske</font></td><td><font color="white">17:01:</font></td><td><font color="white">237</tr>
<tr bgcolor="maroon"><td><font color="white">bughunter</font></td><td><font color="white">17:03:</font></td><td><font color="white">85</tr>
<tr bgcolor="purple"><td><font color="white">cow</font></td><td><font color="white">17:05:</font></td><td><font color="white">74</tr>
<tr bgcolor="slategray"><td><font color="white">fraggle</font></td><td><font color="white">17:14:</font></td><td><font color="white">1</tr>
<tr bgcolor="red"><td><font color="white">golbez</font></td><td><font color="white">17:02:</font></td><td><font color="white">2</tr>
<tr bgcolor="green"><td><font color="white">neiljp</font></td><td><font color="white">17:33:</font></td><td><font color="white">8</tr>
<tr bgcolor="teal"><td><font color="white">njs</font></td><td><font color="white">17:26:</font></td><td><font color="white">8</tr>
<tr bgcolor="indigo"><td><font color="white">nsouch</font></td><td><font color="white">17:17:</font></td><td><font color="white">72</tr>
<tr bgcolor="blue"><td><font color="white">ortalo</font></td><td><font color="white">17:02:</font></td><td><font color="white">57</tr>
<tr bgcolor="darkcyan"><td><font color="white">oxygene</font></td><td><font color="white">17:20:</font></td><td><font color="white">1</tr>
<tr bgcolor="gray"><td><font color="white">philbo</font></td><td><font color="white">18:17:</font></td><td><font color="white">43</tr>
<tr bgcolor="gray"><td><font color="white">philbo_</font></td><td><font color="white">17:04:</font></td><td><font color="white">58</tr>
<tr bgcolor="blue"><td><font color="white">scanlime</font></td><td><font color="white">18:14:</font></td><td><font color="white">0</tr>
<tr bgcolor="brown"><td><font color="white">skids</font></td><td><font color="white">17:03:</font></td><td><font color="white">131</tr>
</table>
</body></html>
